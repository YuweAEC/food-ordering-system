{% extends 'core/base.html' %}
{% block title %}Cart{% endblock %}

{% block content %}
<h2>Your Cart</h2>

<ul class="list-group mb-3">
    {% for item in cart_items %}
    <li class="list-group-item d-flex justify-content-between">
        {{ item.food_item.name }} x {{ item.quantity }}
        <span>₹{{ item.total_price }}</span>
    </li>
    {% empty %}
    <li class="list-group-item">Your cart is empty.</li>
    {% endfor %}
</ul>

<h4>Total: ₹{{ total }}</h4>

<form method="post" action="{% url 'apply_coupon' %}" class="mb-3">
    {% csrf_token %}
    <div class="input-group">
        <input type="text" name="code" class="form-control" placeholder="Enter Coupon Code" required>
        <div class="input-group-append">
            <button type="submit" class="btn btn-success">Apply Coupon</button>
        </div>
    </div>
</form>

{% if coupon %}
    <div class="alert alert-info">
        <strong>Coupon "{{ coupon.code }}" applied!</strong><br>
        Discount: ₹{{ coupon.discount }}<br>
        Final Price: ₹{{ final_price }}
    </div>
{% endif %}

<a href="{% url 'place_order' %}" class="btn btn-success">Place Order</a>
{% endblock %}

